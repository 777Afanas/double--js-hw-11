{"mappings":"AAAe,SAAAA,IACb,MAAO,CACLC,WAAYC,SAASC,cAAc,gBACnCC,gBAAiBF,SAASC,cAAc,YACxCE,YAAaH,SAASC,cAAc,c,CCFxC,MAAMG,EAAON,IAEN,SAASO,EAAWC,GACzB,MAAMC,EAASD,EACZE,KAAI,EAACC,aACJA,EAAYC,KACZA,EAAIC,MACJA,EAAKC,MACLA,EAAKC,SACLA,EAAQC,UACRA,KAEO,+CACOL,WAAsBC,yGAGlBC,6EAGAC,gFAGGC,iFAGCC,0DAKvBC,KAAK,IAERX,EAAKF,gBAAgBc,mBAAmB,YAAaT,E,CC7BvD,MAAMU,EAAOnB,IACPoB,EAAkB,ICNjB,MAOHC,cACIC,QAAQC,IAAIC,MACZ,MAWMC,EAAM,4BATG,IAAIC,gBAAgB,CAC/BC,IAAK,qCACLC,EAAGJ,KAAKK,YACRC,WAAY,QACZC,YAAa,aACbC,YAAY,EACZC,SAAU,KACVC,KAAMV,KAAKU,SAIf,OADAZ,QAAQC,IAAIE,GACLU,MAAMV,GAAKW,MAAKC,IACnB,IAAKA,EAASC,GACV,MAAM,IAAIC,MAAMF,EAASG,QAE7B,OAAOH,EAASI,MAAM,G,CAI1BC,YACA,OAAOlB,KAAKK,W,CAGZa,UAAMC,GACNnB,KAAKK,YAAcc,C,CAGvBC,gBACIpB,KAAKU,MAAQ,C,CAGjBW,YACIrB,KAAKU,KAAO,C,CA1CfY,cACItB,KAAKK,YAAc,GACnBL,KAAKU,KAAO,EACZV,KAAKS,SAAW,I,GDIzBd,EAAKd,YAAY0C,UAAUC,IAAI,aAC/B7B,EAAKlB,WAAWgD,iBAAiB,UAGjC,SAAkBC,GAQhB,GAPAA,EAAEC,iBAEFhC,EAAKd,YAAY0C,UAAUC,IAAI,aAsCjC,WACE7B,EAAKf,gBAAgBgD,UAAY,G,CAtCjCC,GACAjC,EAAgBsB,MAAQQ,EAAEI,cAAcC,SAAS1B,YAAY2B,MAC7DpC,EAAgByB,aAEXzB,EAAgBsB,MAEnB,YADAe,MAAM,cAIRrC,EAAgBC,cACbe,MAAKsB,IACsB,GAApBA,EAAKC,KAAKC,QAKhBrD,EAAWmD,EAAKC,MAChBxC,EAAKd,YAAY0C,UAAUc,OAAO,cALhCJ,MAAM,0FAKsC,IAE/CK,OAAMC,GAASzC,QAAQC,IAAIwC,I,IAzBhC5C,EAAKd,YAAY4C,iBAAiB,SA4BlC,WACE7B,EAAgBwB,gBAChBxB,EAAgBC,cACbe,MAAKsB,IACJpC,QAAQC,IAAImC,GACY,GAApBA,EAAKC,KAAKC,OAKdrD,EAAWmD,EAAKC,MAJdF,MAAM,wEAIa,IAEtBK,OAAMC,GAASzC,QAAQC,IAAIwC,I","sources":["src/js/get-refs.js","src/js/01-renderMarkup.js","src/js/task-01.js","src/js/01-api-service.js"],"sourcesContent":["export default function getRefs() {\n  return {\n    searchForm: document.querySelector('.search-form'),\n    photosContainer: document.querySelector('.gallery'),\n    loadMoreBtn: document.querySelector('.load-more'),\n  };\n}\n","import getRefs from \"./get-refs\";\n\nconst refs = getRefs();\n\nexport function renderHits(arr) {\n  const markup = arr\n    .map(({\n      webformatURL,\n      tags,\n      likes,\n      views,\n      comments,\n      downloads \n    }) => {       \n      return `<div class=\"photo-card\">\n        <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n       <div class=\"info\">\n        <p class=\"info-item\">\n            <b>Likes: ${likes}</b>\n        </p>\n        <p class=\"info-item\">\n            <b>Views: ${views}</b>\n        </p>\n        <p class=\"info-item\">\n            <b>Comments: ${comments}</b>\n        </p>\n        <p class=\"info-item\">\n            <b>Downloads: ${downloads}</b>\n        </p>\n        </div>\n          </div>`;\n    })\n    .join('');\n\n  refs.photosContainer.insertAdjacentHTML('beforeend', markup);\n}\n\n","\nimport { FetchApiService }  from \"./01-api-service\";\nimport getRefs from \"./get-refs\";\nimport { renderHits } from \"./01-renderMarkup\"; \n\nconst refs = getRefs(); \nconst fetchApiService = new FetchApiService(); \n\nrefs.loadMoreBtn.classList.add('is-hidden');\nrefs.searchForm.addEventListener('submit', onSearch);\nrefs.loadMoreBtn.addEventListener('click', onLoad);  \n\nfunction onSearch(e) {\n  e.preventDefault();\n\n  refs.loadMoreBtn.classList.add('is-hidden');\n  clearPhotosContainer();   \n  fetchApiService.query = e.currentTarget.elements.searchQuery.value;\n  fetchApiService.resetPage();\n \n  if (!fetchApiService.query) {\n    alert(`Pole puste`);\n    return;\n  }\n\n  fetchApiService.fetchPhotos()\n    .then(data => {\n        if (data.hits.length == 0) {\n        alert(`Sorry, there are no images matching your \n              search query. Please try again`);\n        return;\n      } \n      renderHits(data.hits);\n      refs.loadMoreBtn.classList.remove('is-hidden');\n    })\n    .catch(error => console.log(error));\n}\n\nfunction onLoad() {   \n  fetchApiService.incrementPage();   \n  fetchApiService.fetchPhotos()\n    .then(data => { \n      console.log(data);     \n      if (data.hits.length == 0) {\n        alert(`We're sorry, but you've reached the end of \n         search results.`);\n        return;\n      } \n      renderHits(data.hits);\n    })\n    .catch(error => console.log(error));\n}\n\nfunction clearPhotosContainer() {\n  refs.photosContainer.innerHTML = ' ';\n}\n","export class FetchApiService {\n     constructor() {\n         this.searchQuery = '';\n         this.page = 1;\n         this.per_page = '40';\n        }\n\n    fetchPhotos() {        \n        console.log(this);\n        const BASE_URL = 'https://pixabay.com/api';\n\n        const params = new URLSearchParams({\n            key: '39342201-f813eddd1adb93dcbf05db88a',\n            q: this.searchQuery,\n            image_type: 'photo',\n            orientation: 'horizontal',\n            safesearch: true,\n            per_page: '40',\n            page: this.page,             \n        });\n        const url = `${BASE_URL}/?${params}`;\n        console.log(url);\n        return fetch(url).then(response => {             \n            if (!response.ok) {\n                throw new Error(response.status);\n            }\n            return response.json();             \n        });         \n    }\n\n    get query() {\n        return this.searchQuery;         \n    }\n\n    set query(newQuery) {\n        this.searchQuery = newQuery;         \n    }\n\n    incrementPage() {\n        this.page += 1; \n    }\n \n    resetPage() {\n        this.page = 1; \n    }    \n}\n\n"],"names":["$f973f0a89548de5e$export$2e2bcd8739ae039","searchForm","document","querySelector","photosContainer","loadMoreBtn","$ccfec26b5d30a5a7$var$refs","$ccfec26b5d30a5a7$export$4de42e61a21600ec","arr","markup","map","webformatURL","tags","likes","views","comments","downloads","join","insertAdjacentHTML","$a3b8e1bc5eec2559$var$refs","$a3b8e1bc5eec2559$var$fetchApiService","fetchPhotos","console","log","this","url","URLSearchParams","key","q","searchQuery","image_type","orientation","safesearch","per_page","page","fetch","then","response","ok","Error","status","json","query","newQuery","incrementPage","resetPage","constructor","classList","add","addEventListener","e","preventDefault","innerHTML","$a3b8e1bc5eec2559$var$clearPhotosContainer","currentTarget","elements","value","alert","data","hits","length","remove","catch","error"],"version":3,"file":"task-01.d9043162.js.map"}