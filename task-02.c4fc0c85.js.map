{"mappings":"YAEA,IAAMA,EAAOC,UAGbD,EAAKE,YAAYC,UAAUC,IAAI,aAC/BJ,EAAKK,WAAWC,iBAAiB,UAWjC,SAAkBC,GAUhB,GATAA,EAAEC,iBAEFR,EAAKE,YAAYC,UAAUC,IAAI,aA8EjC,WACEJ,EAAKS,gBAAgBC,UAAY,G,CA7ElCC,GAECC,EAAO,IACPC,EAAQN,EAAEO,cAAcC,SAASC,YAAYC,OAI3C,YADAC,MAAO,eAoBHC,EAAW,0BACXC,EAAS,IAAIC,gBAAgB,CACjCC,IAAK,qCACLC,EAAGV,EACHW,WAAY,QACZC,YAAa,aACbC,YAAY,EACZC,SA5CW,GA6CXC,KAAAhB,IAKIiB,EAAM,GAAgBC,OAAbX,EAAS,MAAWW,OAAPV,GAC5BW,QAAQC,IAAIH,GACLI,MAAMJ,GAAKK,MAAK,SAAAC,GACrB,IAAKA,EAASC,GACZ,MAAM,IAAIC,MAAMF,EAASG,QAG3B,OAAOH,EAASI,M,KAnCfL,MAAK,SAAAM,GAuCV,IAAoBC,EACZC,EAvCsB,GAApBF,EAAKG,KAAKC,QAKdb,QAAQC,IAAIQ,GAiCEC,EAhCHD,EAAKG,KAiCdD,EAASD,EACZI,KAAI,SAAAC,GACH,MAAO,+CACkChB,OAA3BgB,EAAKC,aAAa,WAGdjB,OAHuBgB,EAAKE,KAAK,yGAMjClB,OAHAgB,EAAKG,MAAM,6EAMRnB,OAHHgB,EAAKI,MAAM,gFAMPpB,OAHDgB,EAAKK,SAAS,iFAGErB,OAAfgB,EAAKM,UAAU,uD,IAKtCC,KAAK,IAERrD,EAAKS,gBAAgB6C,mBAAmB,YAAaZ,IA5D/CxB,MAAO,0F,IAOVqC,OAAM,SAAAC,G,OAASzB,QAAQC,IAAIwB,E,IAE9BxD,EAAKE,YAAYC,UAAUsD,OAAO,aAGpC,IACQtC,EACAC,EAYAS,C,IAtDR7B,EAAKE,YAAYI,iBAAiB,QAASoD,QAE3C,IAMI7C,EANAD,EAAO,C","sources":["src/js/task-02.js"],"sourcesContent":["\n\nconst refs = getRefs(); \n\n\nrefs.loadMoreBtn.classList.add('is-hidden');\nrefs.searchForm.addEventListener('submit', onSearch);\nrefs.loadMoreBtn.addEventListener('click', onLoad);  \n\nlet page = 1;\n// Controls the number of items in the group\nlet per_page = 40;\n// let totalHits;\n// // In our case total number of pages is calculated on frontend\n// const totalPages = 100 / limit;\nlet query;\n\nfunction onSearch(e) {\n  e.preventDefault();\n\n  refs.loadMoreBtn.classList.add('is-hidden');\n\n clearPhotosContainer();\n\n  page = 1;\n  query = e.currentTarget.elements.searchQuery.value;\n\n  if (!query) {\n    alert(`Pole puste`);\n    return;\n  }\n\n  fetchPhotos()\n    .then(data => {\n      if (data.hits.length == 0) {\n        alert(`Sorry, there are no images matching your \n              search query. Please try again`);\n        return;\n      }\n      console.log(data);\n      renderHits(data.hits);\n    })\n    .catch(error => console.log(error));\n\n  refs.loadMoreBtn.classList.remove('is-hidden');\n}\n\nfunction fetchPhotos() {\n  const BASE_URL = 'https://pixabay.com/api';\n  const params = new URLSearchParams({\n    key: '39342201-f813eddd1adb93dcbf05db88a',\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    per_page,\n    page,\n  });\n  //     const url = `${BASE_URL}/?key=${API_KEY}&\n  // q=yellow+flower&image_type=photo&orientation=horizontal&\n  // safesearch=true&${params}`;\n  const url = `${BASE_URL}/?${params}`;\n  console.log(url);\n  return fetch(url).then(response => {\n    if (!response.ok) {\n      throw new Error(response.status);\n    }\n\n    return response.json();\n  });\n}\n\nfunction renderHits(arr) {\n  const markup = arr\n    .map(item => {\n      return `<div class=\"photo-card\">\n        <img src=\"${item.webformatURL}\" alt=\"${item.tags}\" loading=\"lazy\" />\n       <div class=\"info\">\n        <p class=\"info-item\">\n            <b>Likes: ${item.likes}</b>\n        </p>\n        <p class=\"info-item\">\n            <b>Views: ${item.views}</b>\n        </p>\n        <p class=\"info-item\">\n            <b>Comments: ${item.comments}</b>\n        </p>\n        <p class=\"info-item\">\n            <b>Downloads: ${item.downloads}</b>\n        </p>\n        </div>\n          </div>`;\n    })\n    .join('');\n\n  refs.photosContainer.insertAdjacentHTML('beforeend', markup);\n}\n\nfunction clearPhotosContainer() {\n  refs.photosContainer.innerHTML = ' ';\n}"],"names":["$f57647c0be1b1eef$var$refs","getRefs","loadMoreBtn","classList","add","searchForm","addEventListener","e","preventDefault","photosContainer","innerHTML","$f57647c0be1b1eef$var$clearPhotosContainer","$f57647c0be1b1eef$var$page","$f57647c0be1b1eef$var$query","currentTarget","elements","searchQuery","value","alert","BASE_URL","params","URLSearchParams","key","q","image_type","orientation","safesearch","per_page","page","url","concat","console","log","fetch","then","response","ok","Error","status","json","data","arr","markup","hits","length","map","item","webformatURL","tags","likes","views","comments","downloads","join","insertAdjacentHTML","catch","error","remove","onLoad"],"version":3,"file":"task-02.c4fc0c85.js.map"}