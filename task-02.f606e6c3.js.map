{"mappings":"iiBAAA,IAAAA,EAAAC,EAAA,S,aAAOC,ECAJ,W,sBDAUC,I,aAEJC,KAAKC,YAAc,GACnBD,KAAKE,KAAO,EACZF,KAAKG,SAAW,E,iBAGrBC,IAAA,c,MAAA,WACI,IACMC,EAAS,IAAIC,gBAAgB,CAC/BF,IAAK,qCACLG,EAAGP,KAAKC,YACRO,WAAY,QACZC,YAAa,aACbC,YAAY,EACZP,SAAUH,KAAKG,SACfD,KAAMF,KAAKE,OAETS,EAAM,GAAgBC,OAVX,0BAUO,MAAWA,OAAPP,GAE5B,OAAOQ,MAAMF,GAAKG,MAAK,SAAAC,GACnB,IAAKA,EAASC,GACV,MAAM,IAAIC,MAAMF,EAASG,QAE7B,OAAOH,EAASI,M,OAIpBf,IAAA,Q,IAAJ,WACI,OAAOJ,KAAKC,W,MAGhB,SAAUmB,GACNpB,KAAKC,YAAcmB,C,IAGvBhB,IAAA,gB,MAAA,WACIJ,KAAKE,MAAQ,C,IAGjBE,IAAA,Y,MAAA,WACIJ,KAAKE,KAAO,C,OCzCjB,G,uCCQGmB,GAAO,EAAAC,EAAAC,WACPC,EAAkB,IAAI1B,EAE5BuB,EAAKI,YAAYC,UAAUC,IAAI,aAC/BN,EAAKO,WAAWC,iBAAiB,UAGjC,SAAkBC,GAQhB,GAPAA,EAAEC,iBAEFV,EAAKI,YAAYC,UAAUC,IAAI,aA6DjC,WACEN,EAAKW,gBAAgBC,UAAY,G,CA7DjCC,GACAV,EAAgBW,MAAQL,EAAEM,cAAcC,SAASpC,YAAYqC,MAC7Dd,EAAgBe,aAEXf,EAAgBW,MAKnB,YAHAK,EAAAC,OAAOC,QAAS,uGAMlBlB,EAAgBmB,cACb7B,MAAK,SAAA8B,GACsB,GAApBA,EAAKC,KAAKC,QAOhBC,QAAQC,IAAIJ,EAAKK,WACZL,EAAKK,WAEPT,EAAAC,OAAOS,QAAQ,oBAAmCtC,OAAfgC,EAAKK,UAAU,cAIrD,EAAAE,EAAAC,YAAWR,EAAKC,MAShBxB,EAAKI,YAAYC,UAAU2B,OAAO,cApBhCb,EAAAC,OAAOa,QAAS,0F,IAsBnBC,OAAM,SAAAC,G,OAAST,QAAQC,IAAIQ,E,OA7ChCnC,EAAKI,YAAYI,iBAAiB,SAiDlC,WACEL,EAAgBiC,gBAChBjC,EAAgBmB,cACb7B,MAAK,SAAA8B,GACJG,QAAQC,IAAIJ,GACY,GAApBA,EAAKC,KAAKC,QAOd,EAAAK,EAAAC,YAAWR,EAAKC,MAJdL,EAAAC,OAAOiB,KAAM,wE,IAMhBH,OAAM,SAAAC,G,OAAST,QAAQC,IAAIQ,E","sources":["src/js/02-api-service.js","<<jsx-config-pragma.js>>","src/js/task-02.js"],"sourcesContent":["export class FetchApiService {\n     constructor() {\n         this.searchQuery = '';\n         this.page = 1;\n         this.per_page = 40;\n        }\n\n    fetchPhotos() {                \n        const BASE_URL = 'https://pixabay.com/api'; \n        const params = new URLSearchParams({\n            key: '39342201-f813eddd1adb93dcbf05db88a',\n            q: this.searchQuery,\n            image_type: 'photo',\n            orientation: 'horizontal',\n            safesearch: true,\n            per_page: this.per_page,\n            page: this.page,             \n        });\n        const url = `${BASE_URL}/?${params}`;\n        \n        return fetch(url).then(response => {             \n            if (!response.ok) {\n                throw new Error(response.status);\n            }\n            return response.json();             \n        });         \n    }\n\n    get query() {\n        return this.searchQuery;         \n    }\n\n    set query(newQuery) {\n        this.searchQuery = newQuery;         \n    }\n\n    incrementPage() {\n        this.page += 1; \n    }\n \n    resetPage() {\n        this.page = 1; \n    }    \n}\n",null,"\nimport { FetchApiService }  from \"./02-api-service\";\nimport getRefs from \"./get-refs\";\nimport { renderHits } from \"./01-renderMarkup\"; \n// import SimpleLightbox from 'simplelightbox';\n// import 'simplelightbox/dist/simple-lightbox.min.css';\nimport { Notify } from \"notiflix/build/notiflix-notify-aio\";\n\nconst refs = getRefs(); \nconst fetchApiService = new FetchApiService(); \n\nrefs.loadMoreBtn.classList.add('is-hidden');\nrefs.searchForm.addEventListener('submit', onSearch);\nrefs.loadMoreBtn.addEventListener('click', onLoad);  \n\nfunction onSearch(e) {\n  e.preventDefault();\n\n  refs.loadMoreBtn.classList.add('is-hidden');\n  clearPhotosContainer();   \n  fetchApiService.query = e.currentTarget.elements.searchQuery.value;\n  fetchApiService.resetPage();\n \n  if (!fetchApiService.query) {\n    // alert(`Pole puste`);\n    Notify.warning(`Sorry, but the search field \n    cannot be left blank, to start searching,\n    please fill it out`);\n    return;\n  }\n\n  fetchApiService.fetchPhotos()\n    .then(data => {       \n        if (data.hits.length == 0) {\n        // alert(`Sorry, there are no images matching your \n        //       search query. Please try again`);\n        Notify.failure(`Sorry, there are no images matching your \n              search query. Please try again`);  \n        return;\n      } \n      console.log(data.totalHits);\n       if (data.totalHits) {\n        //  alert(`Hooray! We found ${data.totalHits} images.`);\n         Notify.success(`Hooray! We found ${data.totalHits} images.`);\n        // return;\n      } \n             \n      renderHits(data.hits);\n    //  let gallery = new SimpleLightbox('.gallery a', {\n    //    captions: true,\n    //    captionsData: 'alt',\n    //    captionsDelay: 250,\n    //  });\n    //  gallery.refresh();\n    //  console.log(gallery);\n\n      refs.loadMoreBtn.classList.remove('is-hidden');\n    })\n    .catch(error => console.log(error));\n\n}\n\nfunction onLoad() {   \n  fetchApiService.incrementPage();   \n  fetchApiService.fetchPhotos()\n    .then(data => { \n      console.log(data);     \n      if (data.hits.length == 0) {\n        // alert(`We're sorry, but you've reached the end of \n        //  search results.`);\n        Notify.info(`We're sorry, but you've reached the end of \n         search results.`);        \n        return;\n      } \n      renderHits(data.hits);\n    })\n    .catch(error => console.log(error));\n}\n\nfunction clearPhotosContainer() {\n  refs.photosContainer.innerHTML = ' ';\n}\n"],"names":["$8MBJY","parcelRequire","$edb85ff1e1c68a53$export$2058b053a8b70286","FetchApiService","this","searchQuery","page","per_page","key","params","URLSearchParams","q","image_type","orientation","safesearch","url","concat","fetch","then","response","ok","Error","status","json","newQuery","$f57647c0be1b1eef$var$refs","$3vKGz","default","$f57647c0be1b1eef$var$fetchApiService","loadMoreBtn","classList","add","searchForm","addEventListener","e","preventDefault","photosContainer","innerHTML","$f57647c0be1b1eef$var$clearPhotosContainer","query","currentTarget","elements","value","resetPage","$h6c0i","Notify","warning","fetchPhotos","data","hits","length","console","log","totalHits","success","$hmCZE","renderHits","remove","failure","catch","error","incrementPage","info"],"version":3,"file":"task-02.f606e6c3.js.map"}