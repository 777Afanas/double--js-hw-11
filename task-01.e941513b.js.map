{"mappings":"AAAe,SAAAA,IACb,MAAO,CACLC,WAAYC,SAASC,cAAc,gBACnCC,gBAAiBF,SAASC,cAAc,YACxCE,YAAaH,SAASC,cAAc,c,CCHxC,MAAMG,EAAON,IAEN,SAASO,EAAWC,GACzB,MAAMC,EAASD,EACZE,KAAIC,GACI,+CACOA,EAAKC,sBAAsBD,EAAKE,4GAG5BF,EAAKG,iFAGLH,EAAKI,oFAGFJ,EAAKK,wFAGJL,EAAKM,kEAK5BC,KAAK,IAERZ,EAAKF,gBAAgBe,mBAAmB,YAAaV,E,CCrBvD,MAAMW,EAAOpB,IAEPqB,EAAkB,ICPjB,MAKHC,cACIC,QAAQC,IAAIC,MACZ,MAaMC,EAAM,4BAXG,IAAIC,gBAAgB,CAC/BC,IAAK,qCACLC,EAAGJ,KAAKK,WACRC,WAAY,QACZC,YAAa,aACbC,YAAY,EACZC,SAAU,KACVC,KAAM,QAMV,OADAZ,QAAQC,IAAIE,GACLU,MAAMV,GAAKW,MAAKC,IACnB,IAAKA,EAASC,GACV,MAAM,IAAIC,MAAMF,EAASG,QAE7B,OAAOH,EAASI,MAAM,G,CAI1BC,aAEA,OADApB,QAAQC,IAAIC,KAAKK,YACVL,KAAKK,U,CA/Bfc,cACOnB,KAAKK,WAAa,E,GDM9BP,QAAQC,IAAIH,GAOZD,EAAKf,YAAYwC,UAAUC,IAAI,aAC/B1B,EAAKnB,WAAW8C,iBAAiB,UAIjC,SAAkBC,GAChBA,EAAEC,iBAEF7B,EAAKf,YAAYwC,UAAUC,IAAI,aAoE/B1B,EAAKhB,gBAAgB8C,UAAY,IAlEjC3B,QAAQC,IAAIwB,EAAEG,cAAcC,SAASC,YAAYC,OACjDjC,EAAgBsB,OAASK,EAAEG,cAAcC,SAASC,YAAYC,MAC9D/B,QAAQC,IAAIH,GASZA,EAAgBC,cACbe,MAAKkB,IACJhC,QAAQC,IAAI+B,GACY,GAApBA,EAAKC,KAAKC,QAMdlD,EAAWgD,EAAKC,MAChBpC,EAAKf,YAAYwC,UAAUa,OAAO,cANhCC,MAAM,0FAMsC,IAE/CC,OAAMC,GAAStC,QAAQC,IAAIqC,I,IA/BhCzC,EAAKf,YAAY0C,iBAAiB,SAkClC,WACEZ,MAAQ,EAERd,EAAgBC,cACbe,MAAKkB,IACJhC,QAAQC,IAAI+B,EAAKO,WACb3B,KAAO,EAAIoB,EAAKO,UAAY5B,SAC9ByB,MAAM,yEAKRpD,EAAWgD,EAAKC,KAAK,IAEtBI,OAAMC,GAAStC,QAAQC,IAAIqC,I","sources":["src/js/get-refs.js","src/js/01-renderMarkup.js","src/js/task-01.js","src/js/01-api-service.js"],"sourcesContent":["export default function getRefs() {\n  return {\n    searchForm: document.querySelector('.search-form'),\n    photosContainer: document.querySelector('.gallery'),\n    loadMoreBtn: document.querySelector('.load-more'),\n  };\n}\n","import getRefs from \"./get-refs\";\nconst refs = getRefs();\n\nexport function renderHits(arr) {\n  const markup = arr\n    .map(item => {\n      return `<div class=\"photo-card\">\n        <img src=\"${item.webformatURL}\" alt=\"${item.tags}\" loading=\"lazy\" />\n       <div class=\"info\">\n        <p class=\"info-item\">\n            <b>Likes: ${item.likes}</b>\n        </p>\n        <p class=\"info-item\">\n            <b>Views: ${item.views}</b>\n        </p>\n        <p class=\"info-item\">\n            <b>Comments: ${item.comments}</b>\n        </p>\n        <p class=\"info-item\">\n            <b>Downloads: ${item.downloads}</b>\n        </p>\n        </div>\n          </div>`;\n    })\n    .join('');\n\n  refs.photosContainer.insertAdjacentHTML('beforeend', markup);\n}\n\n","\nimport { FetchApiService }  from \"./01-api-service\";\nimport getRefs from \"./get-refs\";\nimport { renderHits } from \"./01-renderMarkup\"; \n\nconst refs = getRefs();\n\nconst fetchApiService = new FetchApiService();\nconsole.log(fetchApiService);\n// let page = 1;\n// let per_page = 40;\n// let query;\n// let params;\n// let q;\n\nrefs.loadMoreBtn.classList.add('is-hidden');\nrefs.searchForm.addEventListener('submit', onSearch);\nrefs.loadMoreBtn.addEventListener('click', onLoad);  \n\n\nfunction onSearch(e) {\n  e.preventDefault();\n\n  refs.loadMoreBtn.classList.add('is-hidden');\n  clearPhotosContainer();\n  console.log(e.currentTarget.elements.searchQuery.value);\n  fetchApiService.query1 = e.currentTarget.elements.searchQuery.value;\n  console.log(fetchApiService);\n \n  // if (!fetchApiService.query) {\n  //   alert(`Pole puste`);\n  //   return;\n  // }\n\n  // console.dir(FetchApiService);\n\n  fetchApiService.fetchPhotos()\n    .then(data => {\n      console.log(data);\n      if (data.hits.length == 0) {\n        alert(`Sorry, there are no images matching your \n              search query. Please try again`);\n        return;\n      }\n\n      renderHits(data.hits);\n      refs.loadMoreBtn.classList.remove('is-hidden');\n    })\n    .catch(error => console.log(error));\n}\n\nfunction onLoad() {\n  page += 1;\n\n  fetchApiService.fetchPhotos()\n    .then(data => {\n      console.log(data.totalHits);\n      if (page - 1 > data.totalHits / per_page) {\n        alert(`We're sorry, but you've reached the end of \n         search results.`);\n        return;\n      }\n\n      renderHits(data.hits);\n    })\n    .catch(error => console.log(error));\n}\n\n\n// function fetchPhotos() {\n//   const BASE_URL = 'https://pixabay.com/api';\n//   const params = new URLSearchParams({\n//     key: '39342201-f813eddd1adb93dcbf05db88a',\n//     q: query,\n//     image_type: 'photo',\n//     orientation: 'horizontal',\n//     safesearch: true,\n//     per_page,\n//     page,\n//   });\n//   const url = `${BASE_URL}/?${params}`;\n\n//   return fetch(url).then(response => {\n//     if (!response.ok) {\n//       throw new Error(response.status);\n//     }\n//     return response.json();\n//   });\n// }\n\nfunction clearPhotosContainer() {\n  refs.photosContainer.innerHTML = ' ';\n}\n","export class FetchApiService {\n     constructor() {\n            this.searchQuer = '';\n        }\n\n    fetchPhotos() {        \n        console.log(this);\n        const BASE_URL = 'https://pixabay.com/api';\n\n        const params = new URLSearchParams({\n            key: '39342201-f813eddd1adb93dcbf05db88a',\n            q: this.searchQuer,\n            image_type: 'photo',\n            orientation: 'horizontal',\n            safesearch: true,\n            per_page: '40',\n            page: '1',\n            // per_page,\n            // page,\n        });\n        const url = `${BASE_URL}/?${params}`;\n        console.log(url);\n        return fetch(url).then(response => {             \n            if (!response.ok) {\n                throw new Error(response.status);\n            }\n            return response.json();             \n        });         \n    }\n\n    get query1() {\n        console.log(this.searchQuer);\n        return this.searchQuer;\n        \n    }\n}"],"names":["$f973f0a89548de5e$export$2e2bcd8739ae039","searchForm","document","querySelector","photosContainer","loadMoreBtn","$ccfec26b5d30a5a7$var$refs","$ccfec26b5d30a5a7$export$4de42e61a21600ec","arr","markup","map","item","webformatURL","tags","likes","views","comments","downloads","join","insertAdjacentHTML","$a3b8e1bc5eec2559$var$refs","$a3b8e1bc5eec2559$var$fetchApiService","fetchPhotos","console","log","this","url","URLSearchParams","key","q","searchQuer","image_type","orientation","safesearch","per_page","page","fetch","then","response","ok","Error","status","json","query1","constructor","classList","add","addEventListener","e","preventDefault","innerHTML","currentTarget","elements","searchQuery","value","data","hits","length","remove","alert","catch","error","totalHits"],"version":3,"file":"task-01.e941513b.js.map"}