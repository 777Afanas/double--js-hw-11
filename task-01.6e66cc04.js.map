{"mappings":"YAAe,SAAAA,IACb,MAAO,CACLC,WAAYC,SAASC,cAAc,gBACnCC,gBAAiBF,SAASC,cAAc,YACxCE,YAAaH,SAASC,cAAc,c,CCHxC,IAAMG,EAAON,IAEN,SAASO,EAAWC,GACzB,IAAMC,EAASD,EACZE,KAAI,SAAAC,GACH,MAAO,+CACkCC,OAA3BD,EAAKE,aAAa,WAGdD,OAHuBD,EAAKG,KAAK,yGAMjCF,OAHAD,EAAKI,MAAM,6EAMRH,OAHHD,EAAKK,MAAM,gFAMPJ,OAHDD,EAAKM,SAAS,iFAGEL,OAAfD,EAAKO,UAAU,uD,IAKtCC,KAAK,IAERb,EAAKF,gBAAgBgB,mBAAmB,YAAaX,E,CCpBvD,IAKIY,EALEC,EAAOtB,IAGTuB,EAAO,EAgEX,SAASC,IACP,IACMC,EAAS,IAAIC,gBAAgB,CACjCC,IAAK,qCACLC,EAAGP,EACHQ,WAAY,QACZC,YAAa,aACbC,YAAY,EACZC,SAvEW,GAwEXC,KAAAV,IAEIW,EAAM,GAAgBtB,OAVX,0BAUO,MAAWA,OAAPa,GAE5B,OAAOU,MAAMD,GAAKE,MAAK,SAAAC,GACrB,IAAKA,EAASC,GACZ,MAAM,IAAIC,MAAMF,EAASG,QAE3B,OAAOH,EAASI,M,IA1EpBnB,EAAKjB,YAAYqC,UAAUC,IAAI,aAC/BrB,EAAKrB,WAAW2C,iBAAiB,UAIjC,SAAkBC,GAYhB,GAXAA,EAAEC,iBAEFxB,EAAKjB,YAAYqC,UAAUC,IAAI,aAsEjC,WACErB,EAAKlB,gBAAgB2C,UAAY,G,CAtEjCC,KAKA3B,EAAQwB,EAAEI,cAAcC,SAASC,YAAYC,OAK3C,YADAC,MAAO,cAMP7B,IACCY,MAAK,SAAAkB,GACJC,QAAQC,IAAIF,GACY,GAApBA,EAAKG,KAAKC,QAMdnD,EAAW+C,EAAKG,MAChBnC,EAAKjB,YAAYqC,UAAUiB,OAAO,cANhCN,MAAO,0F,IAQVO,OAAM,SAAAC,G,OAASN,QAAQC,IAAIK,E,OAlChCvC,EAAKjB,YAAYuC,iBAAiB,SAqClC,WACErB,GAAQ,EAERC,IACGY,MAAK,SAAAkB,GACJC,QAAQC,IAAIF,EAAKQ,WACbvC,EAAO,EAAI+B,EAAKQ,UAnDX,GAoDPT,MAAO,yEAKT9C,EAAW+C,EAAKG,K,IAEjBG,OAAM,SAAAC,G,OAASN,QAAQC,IAAIK,E","sources":["src/js/get-refs.js","src/js/01-renderMarkup.js","src/js/task-01.js"],"sourcesContent":["export default function getRefs() {\n  return {\n    searchForm: document.querySelector('.search-form'),\n    photosContainer: document.querySelector('.gallery'),\n    loadMoreBtn: document.querySelector('.load-more'),\n  };\n}\n","import getRefs from \"./get-refs\";\nconst refs = getRefs();\n\nexport function renderHits(arr) {\n  const markup = arr\n    .map(item => {\n      return `<div class=\"photo-card\">\n        <img src=\"${item.webformatURL}\" alt=\"${item.tags}\" loading=\"lazy\" />\n       <div class=\"info\">\n        <p class=\"info-item\">\n            <b>Likes: ${item.likes}</b>\n        </p>\n        <p class=\"info-item\">\n            <b>Views: ${item.views}</b>\n        </p>\n        <p class=\"info-item\">\n            <b>Comments: ${item.comments}</b>\n        </p>\n        <p class=\"info-item\">\n            <b>Downloads: ${item.downloads}</b>\n        </p>\n        </div>\n          </div>`;\n    })\n    .join('');\n\n  refs.photosContainer.insertAdjacentHTML('beforeend', markup);\n}\n\n","\n// import { fetchPhotos } from \"./api-service\";\nimport getRefs from \"./get-refs\";\nimport { renderHits } from \"./01-renderMarkup\";\n\n\nconst refs = getRefs();\n\n\nlet page = 1;\nlet per_page = 40;\nlet query;\n// let params;\n// let q;\nlet arr;\n\nrefs.loadMoreBtn.classList.add('is-hidden');\nrefs.searchForm.addEventListener('submit', onSearch);\nrefs.loadMoreBtn.addEventListener('click', onLoad);  \n\n\nfunction onSearch(e) {\n  e.preventDefault();\n\n  refs.loadMoreBtn.classList.add('is-hidden');\n  clearPhotosContainer();\n// console.log(query);\n\n  // per_page = 40;\n  // page = 1;\n  query = e.currentTarget.elements.searchQuery.value;\n\n\n  if (!query) {\n    alert(`Pole puste`);\n    return;\n  }\n    \n\n  // fetchPhotos({ page, per_page, q })\n    fetchPhotos()\n    .then(data => {\n      console.log(data);\n      if (data.hits.length == 0) {\n        alert(`Sorry, there are no images matching your \n              search query. Please try again`);\n        return;\n      }\n\n      renderHits(data.hits);\n      refs.loadMoreBtn.classList.remove('is-hidden');\n    })\n    .catch(error => console.log(error));\n}\n\nfunction onLoad() {\n  page += 1;\n\n  fetchPhotos()\n    .then(data => {\n      console.log(data.totalHits);\n      if (page - 1 > data.totalHits / per_page) {\n        alert(`We're sorry, but you've reached the end of \n         search results.`);\n        return;\n      }\n\n      renderHits(data.hits);\n    })\n    .catch(error => console.log(error));\n}\n\n\nfunction fetchPhotos() {\n  const BASE_URL = 'https://pixabay.com/api';\n  const params = new URLSearchParams({\n    key: '39342201-f813eddd1adb93dcbf05db88a',\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    per_page,\n    page,\n  });\n  const url = `${BASE_URL}/?${params}`;\n\n  return fetch(url).then(response => {\n    if (!response.ok) {\n      throw new Error(response.status);\n    }\n    return response.json();\n  });\n}\n\nfunction clearPhotosContainer() {\n  refs.photosContainer.innerHTML = ' ';\n}\n"],"names":["$28e87b1ff6534a73$export$2e2bcd8739ae039","searchForm","document","querySelector","photosContainer","loadMoreBtn","$ca42bd01052e6c32$var$refs","$ca42bd01052e6c32$export$4de42e61a21600ec","arr","markup","map","item","concat","webformatURL","tags","likes","views","comments","downloads","join","insertAdjacentHTML","$07f0dcc9b730cef4$var$query","$07f0dcc9b730cef4$var$refs","$07f0dcc9b730cef4$var$page","$07f0dcc9b730cef4$var$fetchPhotos","params","URLSearchParams","key","q","image_type","orientation","safesearch","per_page","page","url","fetch","then","response","ok","Error","status","json","classList","add","addEventListener","e","preventDefault","innerHTML","$07f0dcc9b730cef4$var$clearPhotosContainer","currentTarget","elements","searchQuery","value","alert","data","console","log","hits","length","remove","catch","error","totalHits"],"version":3,"file":"task-01.6e66cc04.js.map"}