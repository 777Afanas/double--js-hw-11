{"mappings":"AAEA,MAAMA,EAAOC,UAGbD,EAAKE,YAAYC,UAAUC,IAAI,aAC/BJ,EAAKK,WAAWC,iBAAiB,UAWjC,SAAkBC,GAUhB,GATAA,EAAEC,iBAEFR,EAAKE,YAAYC,UAAUC,IAAI,aA8EjC,WACEJ,EAAKS,gBAAgBC,UAAY,G,CA7ElCC,GAECC,EAAO,EACPC,EAAQN,EAAEO,cAAcC,SAASC,YAAYC,OAExCJ,EAEH,YADAK,MAAM,eAmBV,WACE,MAAMC,EAAW,0BACXC,EAAS,IAAIC,gBAAgB,CACjCC,IAAK,qCACLC,EAAGV,EACHW,WAAY,QACZC,YAAa,aACbC,YAAY,E,SA3CD,G,KA6CXd,IAKIe,EAAM,GAAGR,MAAaC,IAE5B,OADAQ,QAAQC,IAAIF,GACLG,MAAMH,GAAKI,MAAKC,IACrB,IAAKA,EAASC,GACZ,MAAM,IAAIC,MAAMF,EAASG,QAG3B,OAAOH,EAASI,MAAM,G,EApCxBC,GACGN,MAAKO,IACoB,GAApBA,EAAKC,KAAKC,QAKdZ,QAAQC,IAAIS,GAiClB,SAAoBG,GAClB,MAAMC,EAASD,EACZE,KAAIC,GACI,+CACOA,EAAKC,sBAAsBD,EAAKE,4GAG5BF,EAAKG,iFAGLH,EAAKI,oFAGFJ,EAAKK,wFAGJL,EAAKM,kEAK5BC,KAAK,IAERnD,EAAKS,gBAAgB2C,mBAAmB,YAAaV,E,CAvDjDW,CAAWf,EAAKC,OALdrB,MAAM,0FAKa,IAEtBoC,OAAMC,GAAS3B,QAAQC,IAAI0B,KAE9BvD,EAAKE,YAAYC,UAAUqD,OAAO,Y,IArCpCxD,EAAKE,YAAYI,iBAAiB,QAASmD,QAE3C,IAMI5C,EANAD,EAAO","sources":["src/js/task-02.js"],"sourcesContent":["\n\nconst refs = getRefs(); \n\n\nrefs.loadMoreBtn.classList.add('is-hidden');\nrefs.searchForm.addEventListener('submit', onSearch);\nrefs.loadMoreBtn.addEventListener('click', onLoad);  \n\nlet page = 1;\n// Controls the number of items in the group\nlet per_page = 40;\n// let totalHits;\n// // In our case total number of pages is calculated on frontend\n// const totalPages = 100 / limit;\nlet query;\n\nfunction onSearch(e) {\n  e.preventDefault();\n\n  refs.loadMoreBtn.classList.add('is-hidden');\n\n clearPhotosContainer();\n\n  page = 1;\n  query = e.currentTarget.elements.searchQuery.value;\n\n  if (!query) {\n    alert(`Pole puste`);\n    return;\n  }\n\n  fetchPhotos()\n    .then(data => {\n      if (data.hits.length == 0) {\n        alert(`Sorry, there are no images matching your \n              search query. Please try again`);\n        return;\n      }\n      console.log(data);\n      renderHits(data.hits);\n    })\n    .catch(error => console.log(error));\n\n  refs.loadMoreBtn.classList.remove('is-hidden');\n}\n\nfunction fetchPhotos() {\n  const BASE_URL = 'https://pixabay.com/api';\n  const params = new URLSearchParams({\n    key: '39342201-f813eddd1adb93dcbf05db88a',\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    per_page,\n    page,\n  });\n  //     const url = `${BASE_URL}/?key=${API_KEY}&\n  // q=yellow+flower&image_type=photo&orientation=horizontal&\n  // safesearch=true&${params}`;\n  const url = `${BASE_URL}/?${params}`;\n  console.log(url);\n  return fetch(url).then(response => {\n    if (!response.ok) {\n      throw new Error(response.status);\n    }\n\n    return response.json();\n  });\n}\n\nfunction renderHits(arr) {\n  const markup = arr\n    .map(item => {\n      return `<div class=\"photo-card\">\n        <img src=\"${item.webformatURL}\" alt=\"${item.tags}\" loading=\"lazy\" />\n       <div class=\"info\">\n        <p class=\"info-item\">\n            <b>Likes: ${item.likes}</b>\n        </p>\n        <p class=\"info-item\">\n            <b>Views: ${item.views}</b>\n        </p>\n        <p class=\"info-item\">\n            <b>Comments: ${item.comments}</b>\n        </p>\n        <p class=\"info-item\">\n            <b>Downloads: ${item.downloads}</b>\n        </p>\n        </div>\n          </div>`;\n    })\n    .join('');\n\n  refs.photosContainer.insertAdjacentHTML('beforeend', markup);\n}\n\nfunction clearPhotosContainer() {\n  refs.photosContainer.innerHTML = ' ';\n}"],"names":["$fee6de0cc58361ef$var$refs","getRefs","loadMoreBtn","classList","add","searchForm","addEventListener","e","preventDefault","photosContainer","innerHTML","$fee6de0cc58361ef$var$clearPhotosContainer","$fee6de0cc58361ef$var$page","$fee6de0cc58361ef$var$query","currentTarget","elements","searchQuery","value","alert","BASE_URL","params","URLSearchParams","key","q","image_type","orientation","safesearch","url","console","log","fetch","then","response","ok","Error","status","json","$fee6de0cc58361ef$var$fetchPhotos","data","hits","length","arr","markup","map","item","webformatURL","tags","likes","views","comments","downloads","join","insertAdjacentHTML","$fee6de0cc58361ef$var$renderHits","catch","error","remove","onLoad"],"version":3,"file":"task-02.811dc513.js.map"}